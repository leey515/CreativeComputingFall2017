<!DOCTYPE html>
<html>
<head>
</head>
<body>
<script >
	var string = "THE GHETTO  I    Cool, inaccessible air   Is floating in velvety blackness shot with steel-blue lights,   But no breath stirs the heat   Leaning its ponderous bulk upon the Ghetto   And most on Hester street…   The heat…   Nosing in the body's overflow,   Like a beast pressing its great steaming belly close,   Covering all avenues of air…   The heat in Hester street,   Heaped like a dray   With the garbage of the world.   Bodies dangle from the fire escapes   Or sprawl over the stoops…   Upturned faces glimmer pallidly—   Herring-yellow faces, spotted as with a mold,   And moist faces of girls   Like dank white lilies,   And infants' faces with open parched mouths that suck at the air        as at empty teats.   Young women pass in groups,   Converging to the forums and meeting halls,   Surging indomitable, slow   Through the gross underbrush of heat.   Their heads are uncovered to the stars,   And they call to the young men and to one another   With a free camaraderie.   Only their eyes are ancient and alone…   The street crawls undulant,   Like a river addled   With its hot tide of flesh   That ever thickens.   Heavy surges of flesh   Break over the pavements,   Clavering like a surf—   Flesh of this abiding   Brood of those ancient mothers who saw the dawn break over Egypt…   And turned their cakes upon the dry hot stones   And went on   Till the gold of the Egyptians fell down off their arms…   Fasting and athirst…   And yet on…   Did they vision—with those eyes darkly clear,   That looked the sun in the face and were not blinded—   Across the centuries   The march of their enduring flesh?   Did they hear—   Under the molten silence   Of the desert like a stopped wheel—   (And the scorpions tick-ticking on the sand…)   The infinite procession of those feet?"


var dictionary ={};
var ngrams = []; 
var ngramlength = 4; 

for(var i = 0; i< string.length-ngramlength; i += ngramlength){
	var ngram = string.substring(i, i+ngramlength);
	var next = string.substring(i+ngramlength, i+ngramlength*2);
	// console.log(ngram, next)
	if(dictionary[ngram] ===undefined){
		dictionary[ngram] = [];
	}
	dictionary[ngram].push(next);
	ngrams.push(ngram);
	}

	// console.log(dictionary);
	console.log(ngrams)

var startword = ngrams[Math.floor(Math.random()*ngrams.length)]; 

var phrase = [startword];

var nextArray = dictionary[startword];

nextArray[Math.floor(Math.random()*nextArray.length)]; 

phrase.push(nextword);

console.log(phrase);
// var whatisthis = dictionary[startword];
// console.log(startword);
// console.log(whatisthis)


</script>

</body>
</html>